<ion-view view-title='{{ currentModule.CourseCode + " : Chats"}}'>

<ion-nav-bar class="bar-positive">
  <ion-nav-back-button class="button-clear">
    <i class="ion-chevron-left"></i> Home
  </ion-nav-back-button>

  <ion-nav-buttons side="right">
   <button ng-click="newChat()" class="button button-icon button-small ion-compose"></button>
  </ion-nav-buttons>
</ion-nav-bar>

  <div class="bar bar-stable bar-subheader item-input-inset">
    <label class="item-input-wrapper">
      <i class="icon ion-ios-search placeholder-icon"></i>
      <input type="search" placeholder="Search" ng-model="searchChat">
    </label>
        <button class="button button-clear" ng-click="findChat(searchChat)" ng-show="!(!searchChat || searchChat === '')">
          Search
        </button>
  </div>

  <ion-content class="has-header has-subheader">
  <ion-refresher on-refresh="refresh()">
    </ion-refresher>
     <ion-list class="chats-list" ng-if='searchChat == ""'>
      <ion-item class="item item-avatar-left" ng-repeat="chat in chats" ng-click ='goToChat(chat)'>
        <img src="./img/default-user.png">
        <h2>{{ chat.Name }}</h2>
        <p>{{ chat.lastText }}</p>
        <span class="badge badge-positive"></span>
        <ion-option-button class="button-positive">Delete</ion-option-button>
      </ion-item>
    </ion-list>

    <ion-list class="chats-list" ng-if='searchChat != ""'>
      <ion-item class="item item-avatar-left" ng-repeat="chat in searchedChats" ng-click ='goToChat(chat)'>
        <img src="./img/default-user.png">
        <h2>{{ chat.Name }}</h2>
        <p>{{ chat.lastText }}</p>
        <span class="badge badge-positive"></span>
        <ion-option-button class="button-positive">Delete</ion-option-button>
      </ion-item>
    </ion-list>
  </ion-content>


</ion-view>
